"use strict";Object.defineProperty(exports, "__esModule", {value: true});"use client";


var _OH2VU3VUcjs = require('../__chunks/OH2VU3VU.cjs');


var _NGEKJJDHcjs = require('../__chunks/NGEKJJDH.cjs');
require('../__chunks/7LBZXSLY.cjs');
require('../__chunks/FQZOOWMH.cjs');
require('../__chunks/CZOBQEIO.cjs');
require('../__chunks/RV3PHHWM.cjs');
require('../__chunks/UZNYSPKP.cjs');
require('../__chunks/BZTDJIVT.cjs');


var _45RPYV4Jcjs = require('../__chunks/45RPYV4J.cjs');
require('../__chunks/KXQOQQ5B.cjs');
require('../__chunks/ISGOCBDC.cjs');


var _XFPRAS3Jcjs = require('../__chunks/XFPRAS3J.cjs');
require('../__chunks/SHOS7XOU.cjs');
require('../__chunks/NKR65BKC.cjs');
require('../__chunks/PZL34OVO.cjs');
require('../__chunks/344F3DYO.cjs');
require('../__chunks/KREY6HXD.cjs');
require('../__chunks/5ZOCN23X.cjs');
require('../__chunks/JVDUGICD.cjs');
require('../__chunks/VV6WA3I6.cjs');
require('../__chunks/7YLCVXZ7.cjs');
require('../__chunks/7TN63K2T.cjs');
require('../__chunks/6IUEXB4L.cjs');
require('../__chunks/JF225FQ5.cjs');
require('../__chunks/5GTNIPQ6.cjs');
require('../__chunks/V24PR4PW.cjs');
require('../__chunks/7566TIRW.cjs');
require('../__chunks/J3OG6T3B.cjs');
require('../__chunks/S6WUBPBB.cjs');
require('../__chunks/XB3G2EO2.cjs');
require('../__chunks/CVD2AZE2.cjs');
require('../__chunks/2BIO7R5N.cjs');
require('../__chunks/LAUATD5O.cjs');
require('../__chunks/7BSMGTGR.cjs');
require('../__chunks/3W6FH6JK.cjs');
require('../__chunks/UVBBMANL.cjs');
require('../__chunks/F2A2ZQDB.cjs');
require('../__chunks/S6UU7NA4.cjs');
require('../__chunks/Z3GCTNW4.cjs');
require('../__chunks/75KXQZJX.cjs');
require('../__chunks/R66IWXK6.cjs');




var _RNZNGEL4cjs = require('../__chunks/RNZNGEL4.cjs');
require('../__chunks/X3I2WFGC.cjs');
require('../__chunks/FQNGCFYY.cjs');
require('../__chunks/OALXXRFM.cjs');


var _EO6LS72Hcjs = require('../__chunks/EO6LS72H.cjs');
require('../__chunks/CJDHQUBR.cjs');




var _AV6KTKLEcjs = require('../__chunks/AV6KTKLE.cjs');

// src/menu/menu.tsx
var _react = require('react');
var _focus = require('@ariakit/core/utils/focus');
var _misc = require('@ariakit/core/utils/misc');
var useMenu = _RNZNGEL4cjs.createHook.call(void 0, 
  (_a) => {
    var _b = _a, {
      store,
      modal: modalProp = false,
      portal = !!modalProp,
      hideOnEscape = true,
      autoFocusOnShow = true,
      hideOnHoverOutside,
      alwaysVisible
    } = _b, props = _AV6KTKLEcjs.__objRest.call(void 0, _b, [
      "store",
      "modal",
      "portal",
      "hideOnEscape",
      "autoFocusOnShow",
      "hideOnHoverOutside",
      "alwaysVisible"
    ]);
    const context = _NGEKJJDHcjs.useMenuProviderContext.call(void 0, );
    store = store || context;
    _misc.invariant.call(void 0, 
      store,
      process.env.NODE_ENV !== "production" && "Menu must receive a `store` prop or be wrapped in a MenuProvider component."
    );
    const ref = _react.useRef.call(void 0, null);
    const parentMenu = store.parent;
    const parentMenubar = store.menubar;
    const hasParentMenu = !!parentMenu;
    const parentIsMenubar = !!parentMenubar && !hasParentMenu;
    props = _AV6KTKLEcjs.__spreadProps.call(void 0, _AV6KTKLEcjs.__spreadValues.call(void 0, {}, props), {
      ref: _EO6LS72Hcjs.useMergeRefs.call(void 0, ref, props.ref)
    });
    const _a2 = _OH2VU3VUcjs.useMenuList.call(void 0, 
      _AV6KTKLEcjs.__spreadValues.call(void 0, { store, alwaysVisible }, props)
    ), { "aria-labelledby": ariaLabelledBy } = _a2, menuListProps = _AV6KTKLEcjs.__objRest.call(void 0, _a2, ["aria-labelledby"]);
    props = menuListProps;
    const [initialFocusRef, setInitialFocusRef] = _react.useState.call(void 0, );
    const autoFocusOnShowState = store.useState("autoFocusOnShow");
    const initialFocus = store.useState("initialFocus");
    const baseElement = store.useState("baseElement");
    const items = store.useState("renderedItems");
    _react.useEffect.call(void 0, () => {
      let cleaning = false;
      setInitialFocusRef((prevInitialFocusRef) => {
        var _a3, _b2, _c;
        if (cleaning)
          return;
        if (!autoFocusOnShowState)
          return;
        if ((_a3 = prevInitialFocusRef == null ? void 0 : prevInitialFocusRef.current) == null ? void 0 : _a3.isConnected)
          return prevInitialFocusRef;
        const ref2 = _react.createRef.call(void 0, );
        switch (initialFocus) {
          case "first":
            ref2.current = ((_b2 = items.find((item) => !item.disabled && item.element)) == null ? void 0 : _b2.element) || null;
            break;
          case "last":
            ref2.current = ((_c = [...items].reverse().find((item) => !item.disabled && item.element)) == null ? void 0 : _c.element) || null;
            break;
          default:
            ref2.current = baseElement;
        }
        if (!ref2.current)
          return;
        return ref2;
      });
      return () => {
        cleaning = true;
      };
    }, [store, autoFocusOnShowState, initialFocus, items, baseElement]);
    const modal = hasParentMenu ? false : modalProp;
    const mayAutoFocusOnShow = !!autoFocusOnShow;
    const canAutoFocusOnShow = !!initialFocusRef || !!props.initialFocus || !!modal;
    props = _45RPYV4Jcjs.useHovercard.call(void 0, _AV6KTKLEcjs.__spreadProps.call(void 0, _AV6KTKLEcjs.__spreadValues.call(void 0, {
      store,
      alwaysVisible,
      initialFocus: initialFocusRef,
      autoFocusOnShow: mayAutoFocusOnShow ? canAutoFocusOnShow && autoFocusOnShow : autoFocusOnShowState || !!modal
    }, props), {
      hideOnEscape: (event) => {
        if (_misc.isFalsyBooleanCallback.call(void 0, hideOnEscape, event))
          return false;
        store == null ? void 0 : store.hideAll();
        return true;
      },
      hideOnHoverOutside: (event) => {
        if (typeof hideOnHoverOutside === "function") {
          return hideOnHoverOutside(event);
        }
        if (hideOnHoverOutside != null)
          return hideOnHoverOutside;
        if (hasParentMenu) {
          parentMenu.setActiveId(null);
          return true;
        }
        if (!parentIsMenubar)
          return false;
        const disclosure = store == null ? void 0 : store.getState().disclosureElement;
        if (!disclosure)
          return true;
        if (_focus.hasFocusWithin.call(void 0, disclosure))
          return false;
        return true;
      },
      modal,
      portal,
      backdrop: hasParentMenu ? false : props.backdrop
    }));
    props = _AV6KTKLEcjs.__spreadValues.call(void 0, {
      "aria-labelledby": ariaLabelledBy
    }, props);
    return props;
  }
);
var Menu = _XFPRAS3Jcjs.createDialogComponent.call(void 0, 
  _RNZNGEL4cjs.createComponent.call(void 0, (props) => {
    const htmlProps = useMenu(props);
    return _RNZNGEL4cjs.createElement.call(void 0, "div", htmlProps);
  }),
  _NGEKJJDHcjs.useMenuProviderContext
);
if (process.env.NODE_ENV !== "production") {
  Menu.displayName = "Menu";
}



exports.Menu = Menu; exports.useMenu = useMenu;
